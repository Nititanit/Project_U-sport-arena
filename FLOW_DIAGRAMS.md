# ğŸ”„ Promotion System Flow Diagram

## User Booking Flow with Promotion

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸƒ USER BOOKING JOURNEY                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ USER SELECTS TIME SLOTS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Select 2 Hours (2,000à¸¿)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
2ï¸âƒ£ ENTERS PROMOTION CODE
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Input: "SUMMER200"      â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚ [SUMMER200]  [à¹ƒà¸Šà¹‰]  â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
3ï¸âƒ£ SYSTEM VALIDATES
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âœ… Code exists?          â”‚
   â”‚ âœ… Active status?        â”‚
   â”‚ âœ… Not expired?          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
       âœ…            âŒ
        â”‚             â”‚
        â–¼             â–¼
   VALID        SHOW ERROR
   CODE         MESSAGE
        â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
4ï¸âƒ£ CALCULATE FINAL PRICE
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Base Price:      2,000à¸¿    â”‚
   â”‚  - Discount:       -200à¸¿    â”‚
   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
   â”‚  Final Price:     1,800à¸¿   â”‚
   â”‚  (Saved color: ğŸŸ¢ Green)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
5ï¸âƒ£ CONFIRM BOOKING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  [à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸ˆà¸­à¸‡]           â”‚
   â”‚  Booking + promotion_id   â”‚
   â”‚  saved to database        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
6ï¸âƒ£ SUCCESS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  âœ… à¸ˆà¸­à¸‡à¸ªà¸™à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!         â”‚
   â”‚  Final Amount: 1,800à¸¿    â”‚
   â”‚  Slots cleared            â”‚
   â”‚  Promotion removed        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Admin Promotion Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ğŸ‘¨â€ğŸ’¼ ADMIN PROMOTION MANAGEMENT                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /admin/promotions    â”‚
â”‚ Promotion List Page  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–º [+ à¹€à¸à¸´à¹ˆà¸¡à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆ] â—„â”€â”
       â”‚                          â”‚
       â”‚                      1ï¸âƒ£ CREATE
       â”‚                          â”‚
       â–¼                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Existing Promotions â”‚      â”‚   Create Form     â”‚
â”‚                      â”‚      â”‚                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚ [à¸£à¸«à¸±à¸”]   [...]   â”‚
â”‚ â”‚ SUMMER200      â”‚   â”‚      â”‚ [à¸ªà¹ˆà¸§à¸™à¸¥à¸”] [300]  â”‚
â”‚ â”‚ âœ… à¹ƒà¸Šà¹‰à¸‡à¸²à¸™      â”‚   â”‚      â”‚ [à¸§à¸±à¸™à¸—à¸µà¹ˆ] [...]   â”‚
â”‚ â”‚ [à¸›à¸´à¸”] [à¸¥à¸š]     â”‚â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â–º [à¸šà¸±à¸™à¸—à¸¶à¸] [à¸¢à¸à¹€à¸¥à¸´à¸] â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                      â”‚              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â–¼
â”‚ â”‚ WELCOME20      â”‚   â”‚      ğŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸ DB
â”‚ â”‚ âœ… à¹ƒà¸Šà¹‰à¸‡à¸²à¸™      â”‚   â”‚              â”‚
â”‚ â”‚ [à¸›à¸´à¸”] [à¸¥à¸š]     â”‚   â”‚              â–¼
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      âœ… à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!
â”‚                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      2ï¸âƒ£ EDIT/TOGGLE
â”‚ â”‚ EXPIRED2024    â”‚   â”‚              â”‚
â”‚ â”‚ âŒ à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸     â”‚   â”‚      [à¸›à¸´à¸” à¹ƒà¸Šà¹‰à¸‡à¸²à¸™]
â”‚ â”‚ [à¹€à¸›à¸´à¸”] [à¸¥à¸š]    â”‚â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         Status Changed
       â–²                             â”‚
       â”‚         3ï¸âƒ£ DELETE          â–¼
       â”‚              â”‚      [à¸¥à¸š] Confirm
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
                      â–¼              â–¼
                  ğŸ—‘ï¸ à¸¥à¸š         âœ… à¸¥à¸šà¸ªà¸³à¹€à¸£à¹‡à¸ˆ
```

---

## Promotion Calculation Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DISCOUNT CALCULATION ENGINE        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input: Base Price + Promotion
       â”‚
       â–¼
    Is Promotion Valid?
    (Status + Date Check)
       â”‚
    â”Œâ”€â”€â”´â”€â”€â”
   NO    YES
    â”‚     â”‚
    â”‚     â–¼
    â”‚  Check Discount Type
    â”‚     â”‚
    â”‚  â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â”‚             â”‚
    â”‚  FIXED AMT    PERCENTAGE
    â”‚  â”‚             â”‚
    â”‚  â–¼             â–¼
    â”‚  discount  discount
    â”‚  = 200à¸¿   = (price Ã— 20%)
    â”‚  â”‚         â”‚
    â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚       â”‚
    â”‚       â–¼
    â”‚  Is discount > price?
    â”‚       â”‚
    â”‚    â”Œâ”€â”€â”´â”€â”€â”
    â”‚   YES   NO
    â”‚    â”‚     â”‚
    â”‚    â–¼     â–¼
    â”‚  CAP   NORMAL
    â”‚  TO    CALC
    â”‚  PRICE
    â”‚    â”‚     â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    Final Price = Base - Discount
         â”‚
         â–¼
    âœ… Return Final Price
```

---

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       COMPONENT HIERARCHY               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ app/reservation/page.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  ReservationDetails                     â”‚
â”‚  â”œâ”€ Stadium Info                        â”‚
â”‚  â””â”€ Booking Section                     â”‚
â”‚     â”œâ”€ Time Slots (local state)         â”‚
â”‚     â”œâ”€ PromotionInput â—„â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚     â”‚  â”œâ”€ Input field          â”‚        â”‚
â”‚     â”‚  â”œâ”€ Apply button         â”‚        â”‚
â”‚     â”‚  â””â”€ Success/Error msg    â”‚        â”‚
â”‚     â”‚                          â”‚        â”‚
â”‚     â””â”€ Price Display           â”‚        â”‚
â”‚        â”œâ”€ Base Price           â”‚        â”‚
â”‚        â”œâ”€ Discount (if any) â—„â”€â”€â”˜        â”‚
â”‚        â””â”€ Final Price                   â”‚
â”‚                                         â”‚
â”‚  Logic:                                 â”‚
â”‚  - selectedSlots (useState)             â”‚
â”‚  - appliedPromotion (useState)          â”‚
â”‚  - handleApplyPromotion()               â”‚
â”‚  - calculateFinalPrice()                â”‚
â”‚  - handleBooking()                      â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ app/admin/promotions/page.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  PromotionsAdmin                        â”‚
â”‚  â”œâ”€ Header + Add button                 â”‚
â”‚  â”œâ”€ Form (conditional)                  â”‚
â”‚  â”‚  â”œâ”€ Name input                       â”‚
â”‚  â”‚  â”œâ”€ Description input                â”‚
â”‚  â”‚  â”œâ”€ Discount type select             â”‚
â”‚  â”‚  â”œâ”€ Discount value input             â”‚
â”‚  â”‚  â”œâ”€ Date pickers                     â”‚
â”‚  â”‚  â”œâ”€ Status select                    â”‚
â”‚  â”‚  â””â”€ Buttons                          â”‚
â”‚  â”‚                                      â”‚
â”‚  â””â”€ Promotions Grid                     â”‚
â”‚     â””â”€ PromotionCard (multiple)         â”‚
â”‚        â”œâ”€ Name + description            â”‚
â”‚        â”œâ”€ Discount display              â”‚
â”‚        â”œâ”€ Date range                    â”‚
â”‚        â”œâ”€ Valid badge                   â”‚
â”‚        â””â”€ Action buttons                â”‚
â”‚                                         â”‚
â”‚  Logic:                                 â”‚
â”‚  - promotions (useState)                â”‚
â”‚  - formData (useState)                  â”‚
â”‚  - handleAddPromotion()                 â”‚
â”‚  - handleDeletePromotion()              â”‚
â”‚  - handleToggleStatus()                 â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow (User Side)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DATA FLOW - USER BOOKING       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ“± UI Input
     â”‚
     â”œâ”€â–º Select Time Slots
     â”‚   â””â”€â–º setSelectedSlots()
     â”‚       â”‚
     â”‚       â–¼
     â”‚   Display: basePrice = slots Ã— 1000
     â”‚
     â”œâ”€â–º Enter Code
     â”‚   â””â”€â–º searchPromotionByCode(code)
     â”‚       â”‚
     â”‚       â–¼
     â”‚   Is Promo Valid?
     â”‚   â”œâ”€â–º Yes: setAppliedPromotion(promo)
     â”‚   â”‚       â”‚
     â”‚   â”‚       â–¼
     â”‚   â”‚   Calculate:
     â”‚   â”‚   - discount = calculateDiscount()
     â”‚   â”‚   - finalPrice = calculateFinalPrice()
     â”‚   â”‚       â”‚
     â”‚   â”‚       â–¼
     â”‚   â”‚   Display:
     â”‚   â”‚   - basePrice à¸¿
     â”‚   â”‚   - discount à¸¿ (green)
     â”‚   â”‚   - finalPrice à¸¿ (green)
     â”‚   â”‚
     â”‚   â””â”€â–º No: setError(msg)
     â”‚       Display error message
     â”‚
     â””â”€â–º Click Confirm
         â””â”€â–º handleBooking()
             â”‚
             â”œâ”€â–º Get user session
             â”œâ”€â–º Save to DB:
             â”‚   {
             â”‚     field_id,
             â”‚     user_id,
             â”‚     time_slot,
             â”‚     promotion_id â—„â”€â”€â”€ Key!
             â”‚   }
             â”‚
             â–¼
         âœ… Success Alert
         - setSelectedSlots([])
         - setAppliedPromotion(null)
         - Reset form
```

---

## Database Integration (Future)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUPABASE INTEGRATION                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Supabase
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Table: promotions                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (UUID)                               â”‚
â”‚ name (TEXT) â—„â”€â”€â”€ SEARCH KEY             â”‚
â”‚ description (TEXT)                      â”‚
â”‚ discount_percentage (DECIMAL)           â”‚
â”‚ discount_amount (DECIMAL)               â”‚
â”‚ valid_from (TIMESTAMP)                  â”‚
â”‚ valid_until (TIMESTAMP)                 â”‚
â”‚ status (TEXT: active/inactive)          â”‚
â”‚ created_at (TIMESTAMP)                  â”‚
â”‚ updated_at (TIMESTAMP)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â–²           â–²
    â”‚           â”‚
  READ      WRITE/UPDATE
    â”‚           â”‚
    â”œâ”€â–º searchPromotionByCode()  (Admin)
    â”‚            â”‚
    â”‚            â”œâ”€â–º Create promo
    â”‚            â”œâ”€â–º Update status
    â”‚            â””â”€â–º Delete promo
    â”‚
    â””â”€â–º (User booking)
         â””â”€â–º Save promotion_id to bookings table
```

---

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ERROR HANDLING SCENARIOS               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”´ Invalid Code
    â””â”€â–º await searchPromotionByCode()
        â””â”€â–º Returns null
            â””â”€â–º setError("à¸£à¸«à¸±à¸ªà¸ªà¹ˆà¸§à¸™à¸¥à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡")
                â””â”€â–º Display red message

ğŸ”´ Expired Code
    â””â”€â–º isPromotionValid()
        â”œâ”€â–º Check status === 'active' âŒ
        â””â”€â–º OR Check dates: now > valid_until âŒ
            â””â”€â–º setError("à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¹à¸¥à¹‰à¸§")
                â””â”€â–º Display red message

ğŸŸ¡ Empty Code
    â””â”€â–º !code.trim()
        â””â”€â–º setError("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸ªà¹ˆà¸§à¸™à¸¥à¸”")
            â””â”€â–º Display yellow message

âœ… Success
    â””â”€â–º searchPromotionByCode() âœ“
        â””â”€â–º isPromotionValid() âœ“
            â””â”€â–º setAppliedPromotion(promo)
                â””â”€â–º setSuccess(true)
                    â””â”€â–º Display green message
```

---

## Price Calculation Examples

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PRICE CALCULATION EXAMPLES             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example 1: Fixed Discount
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Base Price:      2,000à¸¿
Promo: SUMMER200 (200à¸¿)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Discount:        -200à¸¿
Final Price:     1,800à¸¿
Savings:         10% âœ…


Example 2: Percentage Discount
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Base Price:      1,000à¸¿
Promo: WELCOME20 (20%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Calculation:     1000 Ã— 20% = 200à¸¿
Discount:        -200à¸¿
Final Price:     800à¸¿
Savings:         20% âœ…


Example 3: Discount > Price
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Base Price:      100à¸¿
Promo: VIPUSER500 (500à¸¿)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Discount (capped): -100à¸¿  âš ï¸ CAP
Final Price:     0à¸¿
Savings:         100% (MAX) âœ…
```

---

## Status Indicators

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI STATUS INDICATORS                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… PROMOTION ACTIVE & VALID
   â””â”€â–º Green badge: "à¹ƒà¸Šà¹‰à¸‡à¸²à¸™"
       Green card border
       Show in list

â° PROMOTION EXPIRED
   â””â”€â–º Red badge: "à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸"
       Red border
       Show error: "à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¹à¸¥à¹‰à¸§"
       Still show in admin (for records)

âŒ PROMOTION INACTIVE
   â””â”€â–º Gray badge: "à¸›à¸´à¸”"
       Gray card
       Hidden from users
       Admin can toggle back

ğŸŸ¢ PROMOTION APPLIED (User View)
   â””â”€â–º Green alert box
       Shows: "âœ… à¹ƒà¸Šà¹‰à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"
       Show remove button
       Calculate discount

âŒ PROMOTION ERROR
   â””â”€â–º Red alert box
       Shows: error message
       Examples:
       - "à¸£à¸«à¸±à¸ªà¸ªà¹ˆà¸§à¸™à¸¥à¸”à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡"
       - "à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¹à¸¥à¹‰à¸§"
       - "à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸ªà¹ˆà¸§à¸™à¸¥à¸”"
```

---

## Timeline Example

```
PROMOTION LIFECYCLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

2025-01-01  2025-06-01  2025-12-31  2026-01-01
    â”‚           â”‚           â”‚            â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚            â”‚
    â”‚    ACTIVE PERIOD      â”‚            â”‚
    â”‚           â”‚           â”‚            â”‚
   START       MIDDLE      END         EXPIRED
                                           â”‚
                                    âŒ Can't use


Admin Actions Timeline:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

JAN-01: âœ… Create promo (valid_from: 2025-01-01, valid_until: 2025-12-31)
         â”‚
JAN-15: âœ… Active & Users can use
         â”‚
JUN-01: âœ… Still active (in middle)
         â”‚
DEC-30: âœ… Last chance (1 day left)
         â”‚
DEC-31: â° EXPIRATION TIME
         â”‚
JAN-01: âŒ Expired (Users cannot use)
         â”‚
JAN-10: âœ… Admin can still view & delete old records
```

---

**Last Updated:** January 2025  
**System:** U-Sport Arena Promotion System
